diff -Npur ffmpeg-5.1.4/libavfilter/avf_showspectrum.c ffmpeg-5.1.4-change/libavfilter/avf_showspectrum.c
--- ffmpeg-5.1.4/libavfilter/avf_showspectrum.c	2023-11-10 07:38:51.000000000 +0800
+++ ffmpeg-5.1.4-change/libavfilter/avf_showspectrum.c	2024-12-09 12:16:58.910870720 +0800
@@ -1779,7 +1779,7 @@ static int showspectrumpic_request_frame
             int acc_samples = 0;
             int dst_offset = 0;
 
-            while (nb_frame <= s->nb_frames) {
+            while (nb_frame < s->nb_frames) {
                 AVFrame *cur_frame = s->frames[nb_frame];
                 int cur_frame_samples = cur_frame->nb_samples;
                 int nb_samples = 0;
